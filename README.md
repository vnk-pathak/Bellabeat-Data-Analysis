# Bellabeat Data Analysis (Capstone Case Study)

Data Analysis for Bellabeat, a high-tech manufacturer of health-focused products for Women.
> Time of Analysis : December 2022

> Tools used : **R**, **PostgreSQL**, **Power BI**

----

### Background

I am a junior data analyst working on the marketing analyst team at Bellabeat, a high-tech manufacturer of health-focused products for women. Bellabeat is a successful small company, but they have the potential to become a larger player in the global smart device market. Urška Sršen, cofounder and Chief Creative Officer of Bellabeat, believes that analyzing smart device fitness data could help unlock new growth opportunities for the company. I have been asked to focus on one of Bellabeat’s products and analyze smart device data to gain insight into how consumers are using their smart devices. The insights discovered will then help guide marketing strategy for the company. I will have to present my analysis to the Bellabeat executive team along with high-level recommendations for Bellabeat’s marketing strategy.

----

## Business Task

**Analyze consumer's usage pattern of smart devices to identify potential opportunities of growth for Bellabeat's products and provide recommendations for their marketing strategy.**

----

## Data

### Source

The data for this analysis has been sourced from [this link](https://www.kaggle.com/datasets/arashnic/fitbit).
The data has been made available by [Mobius](https://www.kaggle.com/arashnic). <br>
This dataset is generated by respondents to a distributed survey via Amazon Mechanical Turk. Several Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring.

--

### Limitations

The dataset have several limitations. They are -

- The data is of only 33 users. This sample size is extremely small. This dataset is highly underrepresented when we consider the customer base of Fitbit.

- This data is from 2016. It is more than 6 years old from the time when this analysis is being undertaken.

- This data does not have gender identification of users. Gender is an important factor in analysis of physical activities of persons.

- The data comes from a third party source with no way to examine it's integrity.

- Users were not required to wear their fitbit devices for the entire survey period.

> Note :

> Urška Sršen already informed that this data set might have some limitations, and encouraged to consider adding another data to help
address those limitations. But there was no other publicly available dataset containing any of these parameters.

> The only reliable publicly available data about Physical Activity (known as *Physical Activity Monitor Data*) was found at [**2013-2014 Examination Data**](https://wwwn.cdc.gov/nchs/nhanes/search/datapage.aspx?Component=Examination&CycleBeginYear=2013) from **National Health and Nutrition Examination Survey** which is undertaken by **National Center for Health Statistics**, a unit of **Center for Disease Control and Prevention**, Unites States Government.
> 
> But it only contains the values for Accelerometers of the Sensors which was used to monitor various people. Since it didn't contain any parameter measured in our core dataset, it was not useful for this analysis.

--

### Cleaning and Manipulation

Provided data consisted a total of 18 files. They were categorised based on time frame (daily, hourly, minute) & metrics (calorie, intensity, sleep, weight etc). <br>
All the files were in **.csv** format. <br>
**R** was used for basic cleaning and formatting of the data. <br>

The R Programming Code used for this purpose can be accessed [here](https://github.com/vnk-pathak/Bellabeat-Data-Analysis/blob/main/R%20Script/BDA.md).

The following steps were taken to clean & reformat the raw data :

- The data was imported into separate data frames.

- Data frames for *dailyCalories*, *dailySteps* and *dailyIntensities* was removed because they were just a subset of **dailyActivity**.

- ALl the data frames had a column for Date/Datetime, but their data type was "character". It was changed appropriately in all data frames.

- *hourCalories*, *hourIntensities* and *hourSteps* was merged together to form **hourActivity**.

- *minuteCalories*, *minuteIntensities* and *minuteSteps* was merged together to form **minuteActivity**.

- *hourCalories*, *hourIntensities* and *hourSteps* are now just subsets of **hourActivity**. Since they are now redundant, they were removed.

- *minuteCalories*, *minuteIntensities* and *minuteSteps* are now just subsets of **minuteActivity**. Since they are now redundant, they were removed.

- Several columns were added in several data frames. They are as follows -
  + **DayOfWeek** (*Weekday for the corresponding Date*) was added in **dailyActivity**.
  + **DayOfWeek** (*Weekday for the corresponding Datetime*), **Date** (*Date part of corresponding Datetime value*), **Hour** (*Hour part of corresponding Datetime value*) and **Minute** (*Minute part of corresponding Datetime value*) was added in **heartRate**.
  + **Date** (*Date part of corresponding Datetime value*) and **Hour** (*Hour part of corresponding Datetime value*) was added in **hourActivity**.
  + **Date** (*Date part of corresponding Datetime value*), **Hour** (*Hour part of corresponding Datetime value*) and **Minute** (*Minute part of corresponding Datetime value*) was added in **minuteActivity**.
  + **Date** (*Date part of corresponding Datetime value*) and **Minute** (*Minute part of corresponding Datetime value*) was added in **minuteMET**.
  + **DayOfWeek** (*Weekday for the corresponding Date*) was added in **sleepInfo**.

- We now have a total of 7 data frames. These were saved as **.csv** files for further analysis.

----

## Analysis

**PostgreSQL** was used for the analysis of the dataset. <br>
All the SQL Queries along with their sample results can be accessed [here](https://github.com/vnk-pathak/Bellabeat-Data-Analysis/blob/main/SQL%20Queries/BDA_SQL.md).

Following are the findings of the analysis - 

- Only **4** out of **7** tables, namely *dailyActivity*, *hourActivity*, *minuteActivity* and *minuteMET* has data from **33** different users. *sleepInfo* has data from only **24** users, *heartRate* has data from only **14** users and *weightInfo* has data from only **8** users. (*[Query 1]()*)
- Not all users have complete data. Only **29** users in *dailyActivity*, *hourActivity*, *minuteActivity* and *minuteMET*, **12** in *sleepInfo*, **9** in *heartRate* and **2** in *weightInfo* has data of atleast 3 weeks. (*[Query 2]()*)
- Only **3** users has data in all the tables. And, only **1** user has data in all tables of atleast 3 weeks. (*[Query 4]() & [Query 5]()*)

- The table *dailyActivity* has several errors and outliers (*[Query 7]()*) -
  - **4** records have the value of 'Calories' equals *Zero*.
  - **79** records have the value of 'Sedentary Minutes' equals *1440*.
  - **7** records have the value of 'Sedentary Minutes' equals *1440* along with more than *1000* 'Steps'.
  - **462** records have missing minutes data i.e., Sum of 'Very Active Minutes', 'Fairly Active Minutes', 'Lightly Active Minutes' and 'Sedentary Minutes' was *less than 1440*.
  - **15** records have different values of 'Tracker Distance' and 'Total Distance'.
  - **222** records have the value of 'Total Distance' less than the sum of 'Very Active Distance', 'Moderately Active Distance', 'Lightly Active Distance' and 'Sedentary Distance'. Whereas, **414** have the value of 'Total Distance' more than the Sum.

- The table *hourActivity* has several errors and outliers (*[Query 12]()*) -
  - **1** record has the value of 'Intensity' equals *Zero* but the number of 'Steps' was more than Zero.
  - **201** records hve the number of 'Steps' equals *Zero* but the value of 'Intensity' was more than Zero.

- The table *minuteActivity* has several errors and outliers (*[Query 14]()*) -
  - **286** records have the value of 'Intensity' equals *Zero* but the number of 'Steps' was more than Zero.
  - **13854** records hve the number of 'Steps' equals *Zero* but the value of 'Intensity' was more than Zero.
  - **7** records have the value of 'Calories' as Zero.

- Average Value of MET (Metabolic Equivalent) for each user in *minuteMET* was more than **10** and were as high as **19**. Such high values of MET is only possible in hardcore physical activities such as Competitive Soccer, Uphill Cycling, Sprinting etc. Such high values of Average MET clearly indicates it was not recorded accurately by the device. (*[Query 15]()*)
  > Since the values of MET was not recorded accurately, *minuteMET* will not be used for any further analysis.

- The table *heartRate* has several errors and outliers (*[Query 17]()*) -
  - **23** records have the value of 'Heart Rate' less than *40*.
  - **13** records have the value of 'Heart Rate' more than *200*.

- The table *weightInfo* has several points of concerns (*[Query 21]() & [Query 22]()*) -
  - **41** out of *67* records have the data through Manual Reporting.
  - Only *3* users (One with **24** records, and two with **1** record each) doesn't have the Manually reported weight data.
  > Since the *weightInfo* table has incomplete and mostly manual data, it is subject to bias and hence will not be used for any further analysis.

- In the table *dailyActivty*, **6** users have an extra record of 1 day each when compared to aggregated table of *hourActivity* (and *minuteActivity*). It means that there is no corresponding record in the *hourActivity* (and *minuteActivity*) table of those 6 extra records. (*[Query 23]() & [Query 24]()*)

- The common table of *minuteActivity* and *heartRate* has several errors and outliers (*[Query 26]()*) -
  - **1142** records have 'Heart Rate' less than *60*, but 'Calories' more than *3*.
  - **16** records have 'Heart Rate' more than *150*, but 'Calories' less than *5*.
  - **24** records have 'Heart Rate' more than *100*, but 'Calories' less than *1*.

- The common table of *minuteActivity* and *heartRate* has several errors and outliers (*[Query 28]()*) -
  - **1** records has 'Heart Rate' less than *60*, but 'Calories' more than *180*.
  - **1** records has 'Heart Rate' more than *150*, but 'Calories' less than *300*.
  - **2** records have 'Heart Rate' more than *100*, but 'Calories' less than *60*.

- The common table of *dailyActivity* and *sleepInfo* has several errors and outliers (*[Query 30]()*) -
  - **57** records have the value for 'Total Time In Bed' more than the corresponding 'Sedentary Minutes', while **17** records have the value for 'Total Time In Bed' more than the corresponding sum of 'Very Active Minutes', 'Fairly Active Minutes', 'Lightly Active Minutes' and 'Sedentary Minutes'.
  - **44** records have the value for 'Total Time Asleep' more than the corresponding 'Sedentary Minutes', while **11** records have the value for 'Total Time Asleep' more than the corresponding sum of 'Very Active Minutes', 'Fairly Active Minutes', 'Lightly Active Minutes' and 'Sedentary Minutes'.

- The common table of *dailyActivity*, *hourActivity* and *minuteActivity* has several errors and outliers (*[Query 31]()*) -
  - **418** records in *dailyActivity* have the value of 'Calories' more than the corresponding aggregated value from *hourActivity*, whereas it is less in **384** records.
  - **191** records in *dailyActivity* have the value of 'Calories' more than the corresponding aggregated value from *minuteActivity*, whereas it is less in **743** records.
  - **159** records in *dailyActivity* have the value of 'Steps' more than the corresponding aggregated value from *hourActivity*.
  - **159** records in *dailyActivity* have the value of 'Steps' more than the corresponding aggregated value from *minuteActivity*.
  - **19** records in *dailyActivity* have the value of sum of 'Very Active Minutes', 'Fairly Active Minutes', 'Lightly Active Minutes' and 'Sedentary Minutes' more than the corresponding 'Total Minutes' from *minuteActivity*, whereas it is less in **441** records.
  - For **447** records, the aggregated value of 'Calories' in *hourActivity* was more than the corresponding aggregated value from *minuteActivity*, whereas it is less in **487** records.
  - For **4** records, the aggregated value of 'Steps' & 'Intensity' in *hourActivity* was more than the corresponding aggregated value from *minuteActivity*.

--

> Note :

> We could've found the approximate values of missing Heart Rate of various users from the corresponding MET(s) values using the formulas presented in the following research paper - [The simple method for predicting metabolic equivalents using heart rate in patients with cardiovascular disease](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6003065/).

> But, since the value of MET was not accurately measured, we wouldn't have gotten correct values for the Heart Rate.

--

**We knew that the data was not ideal but the above analysis has shown that the data is also quite erroneous. One might use the results from the analysis of this dataset to get a certain idea or formulate a Hypothesis, but it should not be used to make any business decision.**

--

For the purpose of visualization, a Subset Data of **dailyActivity**, **hourActivity**, **heartRate**, **sleepInfo**, combined table of **dailyActivity** & **heartRate**, combined table of **dailyActivity** & **sleepInfo** and combined table of **hourActivity** & **heartRate**, conataining records of only those users of whom we have data of atleast 3 weeks or more was saved. It was done to prevent any potential skewness due to incomplete records. (*[Query 32]() - [Query 38]()*)

----

## Visualisation & Key Findings

### Visualizations

--

**Power BI** was used to visualize the data.

--

### 1. On an average, an user spent 80% of their daily time in Sedentary Activities followed by around 17% time in Light Activities. Also, an user travel aroud 61% of daily distance doing Light Activities followed by around 28% distance doing High Intensity Activities.
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216807069-46af3091-7d35-4f71-9219-716ada7954a6.jpg">
</kbd>
-
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216807058-85447882-d3ee-4883-b6dc-b47221bba4da.jpg">
</kbd>

### 2. Monday has the highest value of Sedentary Minutes spent by an average user followed by Friday and Tuesday repectively.
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216828562-f73c3003-5b39-40cd-ac5e-a3eb2fcc2026.jpg">
</kbd>

### 3. Tuesday is the most active day in terms of Distance travelled and Number of Steps taken followed by Saturday and Thursday respectively. While in a day, 9th Hour to 20th Hour is the most active time in terms of Steps taken with 18th to 20th hours being the Top 3 Hours.
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216828734-9855b94e-81e7-4871-a150-463f7ce7f963.jpg">
</kbd>
-
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216828769-236dd2c2-1293-4a85-bf69-aa6b0a421fcd.jpg">
</kbd>
-
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216828925-4cd652a4-d55c-4074-aa9a-49a607f8f0e0.jpg">
</kbd>

### 4. Tuesday has the highest Caloric expenditure followed by Saturday & Friday respectively (Although, the difference isn't very significant). While in a day, 9th Hour to 21st Hour has the majority Caloric expenditure with 18th to 20th hours being the Top 3 Hours.
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216823439-0761b61d-7249-4b16-96fb-be338d63a643.jpg">
</kbd>
-
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216823459-f7df9597-daeb-4c6a-a946-812005ce27a6.jpg">
</kbd>

### 5. Calorie expenditure is directly propotional to Distance travelled and Number of Steps taken (both in Daily and Hourly timeframe).
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216827873-dafc1bea-9ef0-4e6b-88ce-f29d2df11e09.jpg">
</kbd>
-
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216828060-43f16767-2fa2-4a05-a2a7-9252c69b7696.jpg">
</kbd>
-
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216828075-51ff1428-b1c1-423d-8f71-bba0f4b5bcad.jpg">
</kbd>

### 6. Calorie expenditure is directly propotional to the Time spent in various types of activities but is inversely proportional to Time spent in Sedentary Activities with a weak negative correlation.
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216827890-0114254f-40e3-4c15-aaab-0e39ec97d949.jpg">
</kbd>

### 7. On an average, Heart Rate of users is nearly same on all days with miniscule varitions.
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216830543-6bfecd7c-11a9-4fef-8e2c-9b40a82fda80.jpg">
</kbd>

### 8. On a daily timeframe, Heart Rate is not heavily affected by Time spent in various activities. Although, it has weak positive correlation with Distance travelled and Number of Steps taken.
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216835922-1a7c13a7-edf3-426d-94a9-7e2b5a510568.jpg">
</kbd>
-
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216835949-efb4faaa-8b41-410f-bcc5-e21a0d84eba3.jpg">
</kbd>
-
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216835961-2c4941dc-0ed2-4515-a4c5-83da4f52638b.jpg">
</kbd>

### 9. On an hourly timeframe, Heart Rate has significant variations. In a day, 7th to 21st Hour has above average Heart Rate. It also has strong positive correlation with Calories burned and Number of Steps taken.
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216836492-945620e7-3d88-47b8-bd51-62f045df5315.jpg">
</kbd>
-
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216836557-08663c0e-da2f-492d-85ba-fe08c59b27e7.jpg">
</kbd>
-
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216836565-70a523d6-4dc4-4039-a0f1-b79332475304.jpg">
</kbd>

### 10. On an average, users sleep most on the Weekends with Saturday and Sunday being the Top 2 days respectively.
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216836884-b4d48653-e0c8-4311-ba68-5b38cc9afd42.jpg">
</kbd>

### 11. Time Asleep has weak negative correlation with Distance travelled and Time spent in various activities.
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216836944-30e5d548-7851-4e43-9f09-7cd089b83a4b.jpg">
</kbd>
-
<kbd>
  <img src="https://user-images.githubusercontent.com/91075582/216836961-cefb7d73-5fa0-475f-a269-7ce55d7b4848.jpg">
</kbd>

--

### Key Findings

> Note : The following findings are only indicative. There isn't much data to strongly support them.

1. Users in this Analysis mostly have a Sedentary Lifestyle. (*As shown by [viz 1]() and [viz 2]()*)

2. There is an indication that Users in this analysis could either be Working Individuals having a Desk Job or College Students. This can be inferred from the following -
    - Majority of time spent in a day (near about 15-16 hours) is in Sedentary Activities. This would include Sleeping and Sitting. (*As shown by [viz 1]() and [viz 2]()*)
    - Weekdays has more Sedentary Time share as compared to Weekends. (*As shown by [viz 2]()*)
    - Users are sleeping less on Weekdays as compared to Weekends. (*As shown by [viz 10]()*)
    - Weekdays are comaparatively more active. That could be because of travelling to office/college. (*As shown by [viz 3]() and [viz 4]()*)
    - On a daily basis, average Heart Rate is nearly same. That could be because of routine day to day activities. (*As shown by [viz 7]()*)

3. Trends in Calorie Expenditure is as per expectations. It is not showing any unexplainable pattern or behaviour. (*As shown by [viz 5]() and [viz 6]()*)

4. Trends of Sleep Time with respect to Distance is as per expectaions. But a negative correlation between Sleep Time and Sedentary Time is an unexplainable pattern since sleeping is a part of Sedentary Time. This coul be because of less data points (because very few people recorded their sleep activity). (*As shown by [viz 11]()*)
----

## Recommendations

1. First and foremost, gather a more comprehensive dataset to accurately analyse consumer's usage pattern.

2. Target College Students and Young Working Class when promoting Bellabeat's products.

3. Market the product as an harmless and user friendly device that can be worn throughout the day.

4. Promote an Active Lifestyle to the potential customers, and how Bellabeat's product would be a perfect companion.
----
